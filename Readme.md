# PEngen: –ü—Ä–æ—Å—Ç–æ–π OpenGL –î–≤–∏–∂–æ–∫ –¥–ª—è 3D –∏ 2D –ì—Ä–∞—Ñ–∏–∫–∏ (C++)

![Badge_Status](https://img.shields.io/badge/Status-Development-blue.svg)
![Badge_Language](https://img.shields.io/badge/Language-C%2B%2B-red.svg)
![Badge_API](https://img.shields.io/badge/API-OpenGL%203.3+-orange.svg)
![Badge_License](https://img.shields.io/badge/License-MIT-green.svg)

## üéØ –û–±–∑–æ—Ä –ü—Ä–æ–µ–∫—Ç–∞

**PEngen** ‚Äî —ç—Ç–æ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∏ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–≤–∏–∂–æ–∫, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ C++ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenGL 3.3+. –û–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±—É—á–µ–Ω–∏—è –æ—Å–Ω–æ–≤–∞–º 3D-–≥—Ä–∞—Ñ–∏–∫–∏, –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π, —Ä–∞–±–æ—Ç—ã —Å –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ 2D-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
## version 0.0.2a
## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* **3D –†–µ–Ω–¥–µ—Ä–∏–Ω–≥:** –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ OBJ —Å –ø–æ–º–æ—â—å—é `tinyobjloader`.
* **–ë–∞–∑–æ–≤–æ–µ –û—Å–≤–µ—â–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ—á–µ—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–≤–µ—Ç–∞ (Point Light) –∏ —à–µ–π–¥–µ—Ä–æ–≤ –æ—Å–≤–µ—â–µ–Ω–∏—è.
* **–¢–µ–∫—Å—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–∫—Å—Ç—É—Ä (PNG/JPG) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `stb_image`.
* **–°–∏—Å—Ç–µ–º–∞ UI:** –ü—Ä–æ—Å—Ç–æ–π 2D-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ö–Ω–æ–ø–∫–∏, –ß–µ–∫–±–æ–∫—Å—ã, –ü–æ–ª—è –≤–≤–æ–¥–∞) —Å –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ `stb_easy_font`.
* **–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `GLM` –¥–ª—è –º–∞—Ç—Ä–∏—Ü, –≤–µ–∫—Ç–æ—Ä–æ–≤ –∏ –∫–≤–∞—Ç–µ—Ä–Ω–∏–æ–Ω–æ–≤.

## üñºÔ∏è –°–∫—Ä–∏–Ω—à–æ—Ç –∏ –í–∏–¥–µ–æ

### –°–∫—Ä–∏–Ω—à–æ—Ç –†–∞–±–æ—Ç—ã –î–≤–∏–∂–∫–∞

*–ü—Ä–∏–º–µ—Ä: 3D-–º–æ–¥–µ–ª—å Viking Room, —Ç–æ—á–µ—á–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–≤–µ—Ç–∞, –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π 2D-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É.*

<img src="sccren.png" alt="–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ PEngine Demo" width="800"/>

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ –í–∏–¥–µ–æ

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç PENgen –≤ –¥–µ–π—Å—Ç–≤–∏–∏, –≤–∫–ª—é—á–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–≤–µ—Ç–∞.
<video src="https://samplelib.com/lib/preview/mp4/sample-5s.mp4" width="320" height="240" controls></video>

---

## üõ†Ô∏è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è PEngen: –ö–∞–∫ –ü–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
–ù–∞—à –¥–≤–∏–∂–æ–∫ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ **OpenGL** –∏ **GLFW** –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö 3D-—Å—Ü–µ–Ω –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏–º–µ–Ω `gnu` –∏ `gnu::UI`.

## 1. üõ†Ô∏è –û—Å–Ω–æ–≤—ã –î–≤–∏–∂–∫–∞ –∏ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ì–ª–∞–≤–Ω–æ–≥–æ –û–∫–Ω–∞
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç OpenGL –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç GLFW –∏ —Å–æ–∑–¥–∞–µ—Ç –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –æ–∫–Ω–æ.

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| `GLFWwindow* Init_OpenGL_Window(int width, int height, const std::string& title)` | –°–æ–∑–¥–∞–µ—Ç –æ–∫–Ω–æ —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ (`width`, `height`) –∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º (`title`). |

### –®–µ–π–¥–µ—Ä—ã
–®–µ–π–¥–µ—Ä—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –∏ –ª–∏–Ω–∫—É—é—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç—ã `ShaderProgram`.

| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| `struct ShaderProgram` | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã —à–µ–π–¥–µ—Ä–æ–≤ (`GLuint programID`). |
| `ShaderProgram Compile_and_Link_Shader(const std::string& vertexPath, const std::string& fragmentPath)` | –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —à–µ–π–¥–µ—Ä—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –ª–∏–Ω–∫—É–µ—Ç –∏—Ö –≤ –≥–æ—Ç–æ–≤—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É. |

---

## 2. üåç 3D-–ì—Ä–∞—Ñ–∏–∫–∞ –∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –°—Ü–µ–Ω–æ–π

–Ø–¥—Ä–æ–º 3D-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —è–≤–ª—è—é—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã **Mesh** –∏ **Model**, –∞ —Ç–∞–∫–∂–µ —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, –≤—Ä–∞—â–µ–Ω–∏–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ).



<img src="sccren1.jpg" alt="–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ PEngine Demo" width="800"/>


### –°—Ç—Ä—É–∫—Ç—É—Ä—ã 3D-–û–±—ä–µ–∫—Ç–æ–≤

| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è |
| :--- | :--- | :--- |
| `struct Vertex` | –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –æ–¥–Ω—É –≤–µ—Ä—à–∏–Ω—É. | `position` (`glm::vec3`), `normal` (`glm::vec3`), `texCoords` (`glm::vec2`). |
| `struct Mesh` | –ï–¥–∏–Ω–∏—Ü–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –•—Ä–∞–Ω–∏—Ç –±—É—Ñ–µ—Ä—ã –≥–µ–æ–º–µ—Ç—Ä–∏–∏ (`VAO`, `VBO`, `IBO`) –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. | `position`, `rotation` (`glm::quat`), `scale`, `textureID`, `baseColor`. |
| `struct Model` | –ö–æ–ª–ª–µ–∫—Ü–∏—è –º–µ—à–µ–π. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π –∏–∑ —Ñ–∞–π–ª–æ–≤. | `std::vector<Mesh> meshes`, `model_position`. |

### –§—É–Ω–∫—Ü–∏–∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è 3D-–ú–æ–¥–µ–ª—è–º–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| `Model Load_Model_From_File_OBJ(const std::string& filePath, const std::string& baseDir)` | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –º–æ–¥–µ–ª—å –∏–∑ —Ñ–∞–π–ª–∞ —Ñ–æ—Ä–º–∞—Ç–∞ **OBJ**. |
| `Model Create_Cube_Model()` | –°–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Å—Ç—É—é –º–æ–¥–µ–ª—å –∫—É–±–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–≤–µ—Ç–∞). |
| `void Draw_Model(const Model& model, const ShaderProgram& shader, const glm::mat4& viewProjection)` | –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –º–æ–¥–µ–ª—å, –∏—Å–ø–æ–ª—å–∑—É—è —É–∫–∞–∑–∞–Ω–Ω—ã–π —à–µ–π–¥–µ—Ä –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—É—é –º–∞—Ç—Ä–∏—Ü—É `View * Projection`. |
| `glm::mat4 Mesh::get_transform() const` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Ç—Ä–∏—Ü—É `Model` (—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏) –¥–ª—è –º–µ—à–∞. |

---

## 3. üí° –û—Å–≤–µ—â–µ–Ω–∏–µ

–î–≤–∏–∂–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–¥–∏–Ω **—Ç–æ—á–µ—á–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–≤–µ—Ç–∞** (`Point Light`).

| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| `struct LightSource` | –û–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–≤–µ—Ç–∞. |
| `LightSource Create_Light_Source(const glm::vec3& position, const glm::vec3& color, float intensity)` | –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ —Å–≤–µ—Ç–∞. |

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –û—Å–≤–µ—â–µ–Ω–∏–µ–º
–ü–æ–∑–∏—Ü–∏–µ–π —Å–≤–µ—Ç–∞ –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–∏—Ö –∫–ª–∞–≤–∏—à:
| –ö–ª–∞–≤–∏—à–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
| :--- | :--- |
| **NumPad +** | –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –≤–≤–µ—Ä—Ö (**Y+**) |
| **NumPad 1** | –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –≤–ª–µ–≤–æ (**X-**) |
| **NumPad 2** | –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –≤–ø—Ä–∞–≤–æ (**X+**) |

---

## 4. üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ö–∞–º–µ—Ä–æ–π (FPS-–°—Ç–∏–ª—å)

–ö–∞–º–µ—Ä–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å—Ç–∏–ª–µ —à—É—Ç–µ—Ä–∞ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞ –∏ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ —Å–∏—Å—Ç–µ–º–µ –≤—Ä–µ–º–µ–Ω–∏ (`deltaTime`) –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–≤–∏–∂–µ–Ω–∏—è.



### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ö–∞–º–µ—Ä—ã (–≤ `GameState`)
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- | :--- |
| `cameraPos` | `glm::vec3` | –¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è –∫–∞–º–µ—Ä—ã. –ù–∞—á–∞–ª—å–Ω–∞—è: `(5.0f, 5.0f, 5.0f)`. |
| `cameraFront` | `glm::vec3` | –í–µ–∫—Ç–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∫—É–¥–∞ —Å–º–æ—Ç—Ä–∏—Ç –∫–∞–º–µ—Ä–∞. |
| `cameraYaw` | `float` | –£–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ –≤–æ–∫—Ä—É–≥ –æ—Å–∏ Y (—Ä—ã—Å–∫–∞–Ω–∏–µ). |
| `cameraPitch` | `float` | –£–≥–æ–ª –Ω–∞–∫–ª–æ–Ω–∞ (—Ç–∞–Ω–≥–∞–∂). –ù–∞—á–∞–ª—å–Ω—ã–π: `-40.0f` (–¥–ª—è –æ–±–∑–æ—Ä–∞ —Å—Ü–µ–Ω—ã). |
| `cameraSpeed` | `float` | –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è (–µ–¥–∏–Ω–∏—Ü –≤ —Å–µ–∫—É–Ω–¥—É). |

### –°—Ö–µ–º–∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è
| –í–≤–æ–¥ | –î–µ–π—Å—Ç–≤–∏–µ |
| :--- | :--- |
| **W, A, S, D** | **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ** –∫–∞–º–µ—Ä—ã –≤–ø–µ—Ä–µ–¥, –≤–ª–µ–≤–æ, –Ω–∞–∑–∞–¥, –≤–ø—Ä–∞–≤–æ. |
| **–ü—Ä–∞–≤–∞—è –ö–Ω–æ–ø–∫–∞ –ú—ã—à–∏ (—É–¥–µ—Ä–∂–∏–≤–∞—Ç—å)** | **–í—Ä–∞—â–µ–Ω–∏–µ** –∫–∞–º–µ—Ä—ã (–∏–∑–º–µ–Ω–µ–Ω–∏–µ —É–≥–ª–æ–≤ Yaw/Pitch). –ö—É—Ä—Å–æ—Ä —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É–¥–µ—Ä–∂–∞–Ω–∏–∏. |
| **ESC (–¥–≤–æ–π–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ)** | –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. |

---

## 5. üñ•Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (UI)

–í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã 2D-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏–º–µ–Ω `gnu::UI` –∏ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –æ—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–µ–∫—Ü–∏–∏. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã UI ‚Äî —ç—Ç–æ **–ø–∏–∫—Å–µ–ª–∏** (Y=0 ‚Äî –≤–µ—Ä—Ö —ç–∫—Ä–∞–Ω–∞).

### –ë–∞–∑–æ–≤—ã–π –≠–ª–µ–º–µ–Ω—Ç
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è |
| :--- | :--- | :--- |
| `struct UIQuad` | –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö 2D-—ç–ª–µ–º–µ–Ω—Ç–æ–≤. | `position` (`glm::vec2`), `size` (`glm::vec2`), `color` (`glm::vec3`), `mesh` (`Mesh`). |

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≠–ª–µ–º–µ–Ω—Ç—ã

| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ | –ù–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã |
| :--- | :--- | :--- | :--- |
| `Button` | `UIQuad` | –ö–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å —Ç–µ–∫—Å—Ç–æ–º. | –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ **–Ω–∞–∂–∞—Ç–∏–∏** (GLFW\_PRESS). |
| `Checkbox` | `UIQuad` | –≠–ª–µ–º–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ —Å —Ç–µ–∫—Å—Ç–æ–º. | –°–æ—Å—Ç–æ—è–Ω–∏–µ `isChecked` –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ **–Ω–∞–∂–∞—Ç–∏–∏**. |
| `InputField` | `UIQuad` | –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞. | –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∫–ª–∏–∫–æ–º –∏–ª–∏ –Ω–∞–∂–∞—Ç–∏–µ–º **T**. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–≤–æ–¥ —Å–∏–º–≤–æ–ª–æ–≤ –∏ **Backspace**. |

### –§—É–Ω–∫—Ü–∏–∏ UI-–†–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- |
| `Mesh Create_Quad_Mesh()` | –°–æ–∑–¥–∞–µ—Ç –æ–±—â—É—é –≥–µ–æ–º–µ—Ç—Ä–∏—é 2D-–∫–≤–∞–¥—Ä–∞—Ç–∞ –¥–ª—è –≤—Å–µ—Ö UI-—ç–ª–µ–º–µ–Ω—Ç–æ–≤. |
| `void Draw_Button(...)` / `void Draw_Checkbox(...)` / `void Draw_InputField(...)` | –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ UI. |
| `bool is_point_in_quad(float x, float y, const UIQuad& quad)` | –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –∫—É—Ä—Å–æ—Ä –≤–Ω—É—Ç—Ä–∏ –æ–±–ª–∞—Å—Ç–∏ UI-–∫–≤–∞–¥—Ä–∞—Ç–∞. |
| `void print_string(float x, float y, const char* text, float r, float g, float b, float scale, bool center)` | –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è FPS, –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö/–ø–æ–ª—è—Ö –≤–≤–æ–¥–∞). |

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ InputField

* **–ê–∫—Ç–∏–≤–∞—Ü–∏—è/–§–æ–∫—É—Å**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ `isActive = true` –ø—Ä–∏ –∫–ª–∏–∫–µ –∏–ª–∏ –Ω–∞–∂–∞—Ç–∏–∏ **T**. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–∏–º–≤–æ–ª—å–Ω—ã–π –≤–≤–æ–¥.
* **–°–∏–º–≤–æ–ª—å–Ω—ã–π –≤–≤–æ–¥**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–ª–±—ç–∫ `character_callback` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Å—Ç—Ä–æ–∫—É `currentText`.
* **–£–¥–∞–ª–µ–Ω–∏–µ**: –ö–ª–∞–≤–∏—à–∞ **Backspace** —É–¥–∞–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–º–≤–æ–ª —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞.
* **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: –ï—Å–ª–∏ `currentText` –ø—É—Å—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `hintText` —Å–µ—Ä—ã–º —Ü–≤–µ—Ç–æ–º. –ü—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞ –∫ —Ç–µ–∫—Å—Ç—É –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –º–∏–≥–∞—é—â–∏–π –∫—É—Ä—Å–æ—Ä.
* **–î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è**: –ö–ª–∏–∫ –≤–Ω–µ –ø–æ–ª—è –≤–≤–æ–¥–∞ –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ **T** —Å–Ω–∏–º–∞–µ—Ç —Ñ–æ–∫—É—Å.
  ## main.cpp
  ```cpp
  // main.cpp

#include "gnu/OpenGL.h"
#include <cmath>
#include <glm/gtx/quaternion.hpp> 
#include <glm/gtc/constants.hpp> 
#include <iostream>
#include <vector>
#include <stdexcept>
#include <cstdio>

// –†–∞–∑–º–µ—Ä—ã —ç–∫—Ä–∞–Ω–∞
const int SCREEN_WIDTH = 800;
const int SCREEN_HEIGHT = 600;

using namespace gnu;
using namespace gnu::UI; // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω UI

// --- –ì–õ–û–ë–ê–õ–¨–ù–´–ï –°–û–°–¢–û–Ø–ù–ò–Ø –î–õ–Ø UI –ò –ú–û–î–ï–õ–ï–ô ---
struct GameState {
    LightSource mainLight;
    Model vikingModel;
    Model parrotModel;
    bool isParrotVisible = false; // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏
    bool showFPS = true;          // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —á–µ–∫–±–æ–∫—Å–∞

    // –≠–ª–µ–º–µ–Ω—Ç—ã UI
    Button parrotButton;
    Button oqut;
    Checkbox fpsCheckbox;
    InputField inputField;

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –í–í–û–î–û–ú
    float mouseX = 0.0f;
    float mouseY = 0.0f;
    bool isCtrlPressed = false;   // –î–ª—è –¥–≤–æ–π–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–∞
    double lastKeyTime = 0.0;     // –î–ª—è –¥–≤–æ–π–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–∞

    // ‚≠êÔ∏è –ö–ê–ú–ï–†–ê (FPS-–°—Ç–∏–ª—å) ‚≠êÔ∏è
    glm::vec3 cameraPos = glm::vec3(5.0f, 5.0f, 5.0f); // –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
    glm::vec3 cameraFront = glm::vec3(0.0f, 0.0f, -1.0f); // –í–µ–∫—Ç–æ—Ä "–í–ø–µ—Ä–µ–¥"
    glm::vec3 cameraUp = glm::vec3(0.0f, 1.0f, 0.0f); // –í–µ–∫—Ç–æ—Ä "–í–≤–µ—Ä—Ö"

    float cameraYaw = -135.0f; // –ù–∞—á–∞–ª—å–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç 
    float cameraPitch = -40.0f; // ‚≠êÔ∏è –ò–ó–ú–ï–ù–ï–ù–û: –ù–∞–∫–ª–æ–Ω –¥–ª—è –±–æ–ª–µ–µ –ø–æ–ª–Ω–æ–≥–æ –æ–±–∑–æ—Ä–∞ —Å—Ü–µ–Ω—ã ‚≠êÔ∏è
    float cameraSpeed = 10.0f; // –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è (–µ–¥–∏–Ω–∏—Ü –≤ —Å–µ–∫—É–Ω–¥—É)

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º—ã—à—å—é –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è
    double lastMouseX = (double)SCREEN_WIDTH / 2.0;
    double lastMouseY = (double)SCREEN_HEIGHT / 2.0;
    bool firstMouse = true;
    bool isRMBPressed = false; // ‚≠êÔ∏è –ò–ó–ú–ï–ù–ï–ù–û: –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–∏ –º—ã—à–∏ –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è ‚≠êÔ∏è
    float mouseSensitivity = 0.1f;

    // –í—Ä–µ–º—è –∫–∞–¥—Ä–∞ –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è
    double lastFrameTime = 0.0;
};

// –ö–û–õ–ë–≠–ö –î–õ–Ø –û–ë–†–ê–ë–û–¢–ö–ò –ö–õ–ê–í–ò–ê–¢–£–†–´
void key_callback(GLFWwindow* window, int key, int scancode, int action, int mods)
{
    GameState* state = static_cast<GameState*>(glfwGetWindowUserPointer(window));

    if (!state) return;

    if (action == GLFW_PRESS)
    {
        float move_speed = 1.0f;
        double currentTime = glfwGetTime();

        // 1. –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–í–ï–¢–û–ú 
        switch (key) {
        case GLFW_KEY_KP_ADD: // –ö–ª–∞–≤–∏—à–∞ '+' –Ω–∞ numpad (Y+)
            state->mainLight.position.y += move_speed;
            break;
        case GLFW_KEY_1: // X-
            state->mainLight.position.x -= move_speed;
            break;
        case GLFW_KEY_2: // X+
            state->mainLight.position.x += move_speed;
            break;
        }

        // 2. –î–í–û–ô–ù–û–ï –ù–ê–ñ–ê–¢–ò–ï ESCAPE –î–õ–Ø –í–´–•–û–î–ê
        if (key == GLFW_KEY_ESCAPE) {
            if (currentTime - state->lastKeyTime < 0.3) { // 300 –º—Å
                glfwSetWindowShouldClose(window, GLFW_TRUE);
            }
            state->lastKeyTime = currentTime;
        }

        // 3. –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –§–û–ö–£–°–ê –î–õ–Ø –ü–û–õ–Ø –í–í–û–î–ê (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∞–≤–∏—à–µ–π 'T')
        if (key == GLFW_KEY_T) {
            state->inputField.isActive = !state->inputField.isActive;
            // –ü—Ä–∏ —Å–Ω—è—Ç–∏–∏ —Ñ–æ–∫—É—Å–∞ –æ—á–∏—â–∞–µ–º –ø–æ–ª–µ
            if (!state->inputField.isActive) {
                std::cout << "Input Field Result: " << state->inputField.currentText << std::endl;
            }
        }
    }
}
bool exit_requested = false;

// –ö–û–õ–ë–≠–ö: –û–ë–†–ê–ë–û–¢–ö–ê –ú–´–®–ò (–ö–õ–ò–ö–ò)
void mouse_button_callback(GLFWwindow* window, int button, int action, int mods) {
    GameState* state = static_cast<GameState*>(glfwGetWindowUserPointer(window));
    if (!state) return;

    float x = state->mouseX;
    float y = state->mouseY;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ UI –∫–ª–∏–∫–æ–≤
    bool ui_clicked = false;

    // ‚≠êÔ∏è –õ–û–ì–ò–ö–ê UI (—Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–∂–∞—Ç–∏—é GLFW_PRESS, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥–≤–æ–π–Ω–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è/–æ—Ç–º–µ–Ω—ã) ‚≠êÔ∏è
    if (action == GLFW_PRESS)
    {
        // 1. –ö–ù–û–ü–ö–ê PARROT
        if (is_point_in_quad(x, y, state->parrotButton)) {
            state->isParrotVisible = !state->isParrotVisible;
            state->parrotButton.text = state->isParrotVisible ? "Hide Parrot" : "Show Parrot";
            std::cout << "Button Clicked: Parrot is now " << (state->isParrotVisible ? "VISIBLE" : "HIDDEN") << std::endl;
            ui_clicked = true;
        }
        // 2. –ö–ù–û–ü–ö–ê EXIT
        else if (is_point_in_quad(x, y, state->oqut)) {
            exit_requested = true;
            ui_clicked = true;
        }
        // 3. –ß–ï–ö–ë–û–ö–°
        else if (is_point_in_quad(x, y, state->fpsCheckbox)) {
            state->showFPS = !state->fpsCheckbox.isChecked;
            state->fpsCheckbox.isChecked = state->showFPS;
            std::cout << "Checkbox Clicked: Show FPS is now " << (state->showFPS ? "ON" : "OFF") << std::endl;
            ui_clicked = true;
        }

        // 4. –ü–û–õ–ï –í–í–û–î–ê
        if (is_point_in_quad(x, y, state->inputField)) {
            state->inputField.isActive = true;
            ui_clicked = true;
        }
        else {
            // –°–Ω–∏–º–∞–µ–º —Ñ–æ–∫—É—Å, –µ—Å–ª–∏ –∫–ª–∏–∫–Ω—É–ª–∏ –≤–Ω–µ –ø–æ–ª—è
            if (state->inputField.isActive) {
                std::cout << "Input Field Result: " << state->inputField.currentText << std::endl;
            }
            state->inputField.isActive = false;
        }
    } // –ö–æ–Ω–µ—Ü if (action == GLFW_PRESS)

    // ‚≠êÔ∏è –£–ü–†–ê–í–õ–ï–ù–ò–ï –ö–ê–ú–ï–†–û–ô –ü–†–ê–í–û–ô –ö–ù–û–ü–ö–û–ô –ú–´–®–ò (RMB) ‚≠êÔ∏è
    if (button == GLFW_MOUSE_BUTTON_RIGHT) { // ‚≠êÔ∏è –ò–ó–ú–ï–ù–ï–ù–û –ù–ê RMB ‚≠êÔ∏è
        if (action == GLFW_PRESS && !ui_clicked) {
            state->isRMBPressed = true;
            // –°–∫—Ä—ã–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä, –ø–æ–∫–∞ –≤—Ä–∞—â–∞–µ–º
            glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_DISABLED);
        }
        else if (action == GLFW_RELEASE) {
            state->isRMBPressed = false;
            state->firstMouse = true; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–∫–∞—á–∫–∞
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä, –∫–æ–≥–¥–∞ –æ—Ç–ø—É—Å—Ç–∏–ª–∏
            glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_NORMAL);

            // –¢–∞–∫–∂–µ, –µ—Å–ª–∏ –æ—Ç–ø—É—Å–∫–∞–µ–º –∫–Ω–æ–ø–∫—É, –∏ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–æ, —Å—Ç–∞–≤–∏–º –∫—É—Ä—Å–æ—Ä –≤ —Ä–µ–∂–∏–º –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ
            if (!state->inputField.isActive) {
                glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_NORMAL);
            }
        }
    }
}

// –ö–û–õ–ë–≠–ö: –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–ï –ú–´–®–ò (–î–õ–Ø –ù–ê–í–ï–î–ï–ù–ò–Ø –ò –í–†–ê–©–ï–ù–ò–Ø –ö–ê–ú–ï–†–´)
void cursor_position_callback(GLFWwindow* window, double xpos, double ypos) {
    GameState* state = static_cast<GameState*>(glfwGetWindowUserPointer(window));
    if (!state) return;

    state->mouseX = (float)xpos;
    state->mouseY = (float)ypos;

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –∫–Ω–æ–ø–∫–∏ (UI logic)
    state->parrotButton.isHovered = is_point_in_quad(state->mouseX, state->mouseY, state->parrotButton);

    // ‚≠êÔ∏è –õ–û–ì–ò–ö–ê –í–†–ê–©–ï–ù–ò–Ø –ö–ê–ú–ï–†–´ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ RMB –Ω–∞–∂–∞—Ç–∞) ‚≠êÔ∏è
    if (state->isRMBPressed && !state->inputField.isActive) {
        if (state->firstMouse) {
            state->lastMouseX = xpos;
            state->lastMouseY = ypos;
            state->firstMouse = false;
        }

        float xoffset = (float)(xpos - state->lastMouseX);
        float yoffset = (float)(state->lastMouseY - ypos); // –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ (Y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —ç–∫—Ä–∞–Ω–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã)

        state->lastMouseX = xpos;
        state->lastMouseY = ypos;

        xoffset *= state->mouseSensitivity;
        yoffset *= state->mouseSensitivity;

        state->cameraYaw += xoffset;
        state->cameraPitch += yoffset;

        // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Pitch (–Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å—Å—è)
        if (state->cameraPitch > 89.0f) state->cameraPitch = 89.0f;
        if (state->cameraPitch < -89.0f) state->cameraPitch = -89.0f;

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ cameraFront
        glm::vec3 front;
        front.x = cos(glm::radians(state->cameraYaw)) * cos(glm::radians(state->cameraPitch));
        front.y = sin(glm::radians(state->cameraPitch));
        front.z = sin(glm::radians(state->cameraYaw)) * cos(glm::radians(state->cameraPitch));
        state->cameraFront = glm::normalize(front);
    }
}

// –ö–û–õ–ë–≠–ö: –û–ë–†–ê–ë–û–¢–ö–ê –í–í–û–î–ê –°–ò–ú–í–û–õ–û–í (–î–õ–Ø –ü–û–õ–Ø –í–í–û–î–ê)
void character_callback(GLFWwindow* window, unsigned int codepoint) {
    GameState* state = static_cast<GameState*>(glfwGetWindowUserPointer(window));
    if (!state || !state->inputField.isActive) return;

    // –ü—Ä–æ—Å—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞: —Ç–æ–ª—å–∫–æ –ø–µ—á–∞—Ç–∞–µ–º—ã–µ —Å–∏–º–≤–æ–ª—ã
    if (codepoint >= 32 && codepoint <= 126) {
        state->inputField.currentText += (char)codepoint;
    }
}

// –ö–û–õ–ë–≠–ö: BACKSPACE
void process_backspace(GLFWwindow* window) {
    GameState* state = static_cast<GameState*>(glfwGetWindowUserPointer(window));
    if (!state || !state->inputField.isActive) return;

    // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–µ—Ä–∂–∫—É
    static double last_delete_time = 0.0;
    double current_time = glfwGetTime();

    if (current_time - last_delete_time > 0.1) {
        if (!state->inputField.currentText.empty()) {
            state->inputField.currentText.pop_back();
            last_delete_time = current_time;
        }
    }
}


int main() {
    // --- 1. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–ò–°–¢–ï–ú–´ ---
    GLFWwindow* window = Init_OpenGL_Window(SCREEN_WIDTH, SCREEN_HEIGHT, "GNU OpenGL Engine - Model and UI Test");
    if (!window) return -1;

    glEnable(GL_DEPTH_TEST);
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);
    glFrontFace(GL_CCW);

    // --- –ò–ì–†–û–í–û–ï –°–û–°–¢–û–Ø–ù–ò–ï ---
    GameState state;
    state.mainLight = Create_Light_Source(glm::vec3(0.0f, 5.0f, 0.0f), glm::vec3(1.0f, 1.0f, 1.0f), 5.0f);
    glfwSetWindowUserPointer(window, &state);

    // --- –£–°–¢–ê–ù–û–í–ö–ê –ö–û–õ–ë–≠–ö–û–í ---
    glfwSetKeyCallback(window, key_callback);
    glfwSetCursorPosCallback(window, cursor_position_callback); // –¢–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –≤—Ä–∞—â–µ–Ω–∏–µ
    glfwSetMouseButtonCallback(window, mouse_button_callback);
    glfwSetCharCallback(window, character_callback);


    // --- 2. –ü–û–î–ì–û–¢–û–í–ö–ê –®–ï–ô–î–ï–†–û–í ---
    ShaderProgram modelShader = Compile_and_Link_Shader("simple.vert", "simple.frag");
    if (modelShader.programID == 0) return -1;

    ShaderProgram uiShader = Compile_and_Link_Shader("simple.vert", "simple.frag");
    if (uiShader.programID == 0) return -1;

    ShaderProgram textShader = Compile_and_Link_Shader("text.vert", "text.frag");
    if (textShader.programID == 0) return -1;

    // -------------------------------------------------------------------
    // 3. –ó–ê–ì–†–£–ó–ö–ê 3D-–ú–û–î–ï–õ–ï–ô 
    // -------------------------------------------------------------------
    try {
        state.vikingModel = Load_Model_From_File_OBJ("PEngen\\models\\viking_room.obj", "PEngen\\models\\");
        state.parrotModel = Load_Model_From_File_OBJ("PEngen\\models\\viking_room.obj", "PEngen\\models\\");

        std::cout << "SUCCESS: Loaded both models (Viking and Parrot stub)." << std::endl;
    }
    catch (const std::exception& e) {
        std::cerr << "Model loading failed: " << e.what() << std::endl;
        return -1;
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç—É—Ä—ã
    GLuint customTextureID = Load_Texture_From_File("PEngen\\textures\\viking_room.png");
    if (customTextureID != 0) {
        for (auto& mesh : state.vikingModel.meshes) mesh.textureID = customTextureID;
        for (auto& mesh : state.parrotModel.meshes) mesh.textureID = customTextureID;
    }
    else {
        std::cerr << "WARNING: Custom texture failed to load. Drawing white/diffuse color." << std::endl;
    }

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Å—à—Ç–∞–±–∞/–ø–æ–∑–∏—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π
    for (auto& mesh : state.vikingModel.meshes) mesh.scale = glm::vec3(0.02f);
    for (auto& mesh : state.parrotModel.meshes) mesh.scale = glm::vec3(0.05f);
    for (auto& mesh : state.parrotModel.meshes) mesh.position = glm::vec3(2.0f, 0.0f, 0.0f);

    Model lightBulbModel = Create_Cube_Model();

    // -------------------------------------------------------------------
    // ‚≠êÔ∏è –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø UI-–≠–õ–ï–ú–ï–ù–¢–û–í ‚≠êÔ∏è
    Mesh quadMesh = Create_Quad_Mesh(); // –ë–∞–∑–æ–≤–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è –¥–ª—è –≤—Å–µ—Ö UI-–∫–≤–∞–¥–æ–≤

    // 1. –ó–∞–¥–Ω–µ–µ –ø–æ–ª–µ –º–µ–Ω—é (Panel)
    UI::Panel uiBackground;
    uiBackground.mesh = quadMesh;
    uiBackground.position = glm::vec2(580.0f, 30.0f);
    uiBackground.size = glm::vec2(220.0f, 300.0f);
    uiBackground.color = glm::vec3(0.1f, 0.1f, 0.1f);
    uiBackground.layer = 10.0f;

    // 2. –ù–µ–±–æ–ª—å—à–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (Image 20x20)
    UI::Image uiSmallImage;
    uiSmallImage.mesh = quadMesh;
    uiSmallImage.position = glm::vec2(10.0f, SCREEN_HEIGHT - 30.0f);
    uiSmallImage.size = glm::vec2(20.0f, 20.0f);
    uiSmallImage.textureID = customTextureID;
    uiSmallImage.color = glm::vec3(1.0f, 1.0f, 1.0f);
    uiSmallImage.layer = 20.0f;

    // 3. –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û–ï –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï –°–ù–ò–ó–£ (Image 30x30)
    UI::Image uiBottomImage;
    uiBottomImage.mesh = quadMesh;
    uiBottomImage.position = glm::vec2(50.0f, SCREEN_HEIGHT - 40.0f);
    uiBottomImage.size = glm::vec2(30.0f, 30.0f);
    uiBottomImage.textureID = customTextureID;
    uiBottomImage.color = glm::vec3(1.0f, 0.5f, 0.5f);
    uiBottomImage.layer = 20.0f;

    // 4. –ö–Ω–æ–ø–∫–∞ "Parrot"
    state.parrotButton.mesh = quadMesh;
    state.parrotButton.position = glm::vec2(600.0f, 50.0f);
    state.parrotButton.size = glm::vec2(180.0f, 30.0f);
    state.parrotButton.text = state.isParrotVisible ? "Hide Parrot" : "Show Parrot";
    state.parrotButton.color = glm::vec3(0.2f, 0.5f, 0.8f);
    state.parrotButton.textColor = glm::vec3(1.0f, 1.0f, 1.0f);

    // 5. –ö–Ω–æ–ø–∫–∞ "Exit"
    state.oqut.mesh = quadMesh;
    state.oqut.position = glm::vec2(600.0f, 190.0f);
    state.oqut.size = glm::vec2(180.0f, 30.0f);
    state.oqut.text = "Exit";
    state.oqut.color = glm::vec3(0.8f, 0.2f, 0.2f);
    state.oqut.textColor = glm::vec3(1.0f, 1.0f, 1.0f);

    // 6. –ß–µ–∫–±–æ–∫—Å
    state.fpsCheckbox.mesh = quadMesh;
    state.fpsCheckbox.position = glm::vec2(600.0f, 100.0f);
    state.fpsCheckbox.size = glm::vec2(180.0f, 30.0f);
    state.fpsCheckbox.boxSize = glm::vec2(20.0f, 20.0f);
    state.fpsCheckbox.isChecked = state.showFPS;
    state.fpsCheckbox.text = "Show FPS";

    // 7. –ü–æ–ª–µ –≤–≤–æ–¥–∞
    state.inputField.mesh = quadMesh;
    state.inputField.position = glm::vec2(600.0f, 150.0f);
    state.inputField.size = glm::vec2(180.0f, 30.0f);
    state.inputField.hintText = "Enter Command...";
    state.inputField.textColor = glm::vec3(0.0f, 0.0f, 0.0f);
    // -------------------------------------------------------------------

    // --- 4. –ù–ê–°–¢–†–û–ô–ö–ê –ú–ê–¢–†–ò–¶ (–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è) ---
    // –ú–∞—Ç—Ä–∏—Ü–∞ –ü—Ä–æ–µ–∫—Ü–∏–∏ (–æ—Å—Ç–∞–µ—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π)
    glm::mat4 projection = glm::perspective(glm::radians(45.0f), (float)SCREEN_WIDTH / (float)SCREEN_HEIGHT, 0.1f, 100.0f);
    // –ú–∞—Ç—Ä–∏—Ü—ã View –∏ ViewProjection –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –≤ —Ü–∏–∫–ª–µ
    glm::mat4 view = glm::mat4(1.0f);
    glm::mat4 viewProjection = glm::mat4(1.0f);

    // –ú–ê–¢–†–ò–¶–ê UI: Y=0 –°–í–ï–†–•–£ 
    glm::mat4 orthoMatrix = glm::ortho(0.0f, (float)SCREEN_WIDTH, (float)SCREEN_HEIGHT, 0.0f);
    GLint orthoLoc = glGetUniformLocation(textShader.programID, "orthoMatrix");
    GLint colorLoc = glGetUniformLocation(textShader.programID, "textColor");

    // 4.5. –ù–ê–°–¢–†–û–ô–ö–ê –ò–°–¢–û–ß–ù–ò–ö–ê –°–í–ï–¢–ê 
    GLint lightPosLoc = glGetUniformLocation(modelShader.programID, "lightPos");
    GLint lightColorLoc = glGetUniformLocation(modelShader.programID, "lightColor");
    GLint viewPosLoc = glGetUniformLocation(modelShader.programID, "viewPos");


    // --- 5. FPS –ü–ï–†–ï–ú–ï–ù–ù–´–ï ---
    double lastTime = glfwGetTime(); // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ FPS
    int frameCount = 0;
    char fpsBuffer[32] = "FPS: ...";
    char inputBuffer[100];

    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∫–∞–¥—Ä–∞
    state.lastFrameTime = lastTime;

    // --- 6. –û–°–ù–û–í–ù–û–ô –¶–ò–ö–õ –†–ï–ù–î–ï–†–ò–ù–ì–ê ---
    while (!glfwWindowShouldClose(window) && !exit_requested) {
        // ... (FPS & DeltaTime Logic)
        double currentTime = glfwGetTime();
        // ‚≠êÔ∏è –†–∞—Å—á–µ—Ç DeltaTime ‚≠êÔ∏è
        float deltaTime = (float)(currentTime - state.lastFrameTime);
        state.lastFrameTime = currentTime;

        frameCount++;
        if (currentTime - lastTime >= 1.0) {
            double fps = (double)frameCount / (currentTime - lastTime);
            std::snprintf(fpsBuffer, sizeof(fpsBuffer), "FPS: %.2f", fps);
            frameCount = 0;
            lastTime = currentTime;
        }

        glfwPollEvents();
        glClearColor(0.25f, 0.35f, 0.35f, 1.0f);
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        // --- –û–ë–†–ê–ë–û–¢–ö–ê –í–í–û–î–ê ---
        if (glfwGetKey(window, GLFW_KEY_BACKSPACE) == GLFW_PRESS) {
            process_backspace(window);
        }

        // -------------------------------------------------------------------
        // ‚≠êÔ∏è 7. –û–ë–ù–û–í–õ–ï–ù–ò–ï –ö–ê–ú–ï–†–´ –ò –ú–ê–¢–†–ò–¶ ‚≠êÔ∏è
        // -------------------------------------------------------------------

        // 7.1. –û–ë–†–ê–ë–û–¢–ö–ê WASD –î–í–ò–ñ–ï–ù–ò–Ø
        float cameraSpeed = state.cameraSpeed * deltaTime;

        // –í–µ–∫—Ç–æ—Ä "–í–ø—Ä–∞–≤–æ"
        glm::vec3 cameraRight = glm::normalize(glm::cross(state.cameraFront, state.cameraUp));

        if (glfwGetKey(window, GLFW_KEY_W) == GLFW_PRESS)
            state.cameraPos += cameraSpeed * state.cameraFront;
        if (glfwGetKey(window, GLFW_KEY_S) == GLFW_PRESS)
            state.cameraPos -= cameraSpeed * state.cameraFront;
        if (glfwGetKey(window, GLFW_KEY_A) == GLFW_PRESS)
            state.cameraPos -= cameraSpeed * cameraRight;
        if (glfwGetKey(window, GLFW_KEY_D) == GLFW_PRESS)
            state.cameraPos += cameraSpeed * cameraRight;

        // 7.2. –û–ë–ù–û–í–õ–ï–ù–ò–ï –ú–ê–¢–†–ò–¶
        // –ú–∞—Ç—Ä–∏—Ü–∞ View: Eye Position, Target Position, Up Vector
        view = glm::lookAt(state.cameraPos, state.cameraPos + state.cameraFront, state.cameraUp);
        viewProjection = projection * view;


        // --- –õ–û–ì–ò–ö–ê –í–†–ê–©–ï–ù–ò–Ø –ú–û–î–ï–õ–ò ---
        float time = (float)currentTime; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
        glm::quat total_rotation = glm::angleAxis(time * glm::radians(30.0f), glm::vec3(0.0f, 1.0f, 0.0f));

        for (auto& mesh : state.vikingModel.meshes) {
            mesh.rotation = total_rotation;
            mesh.position = glm::vec3(0.0f, -1.0f, 0.0f);
        }
        for (auto& mesh : state.parrotModel.meshes) {
            mesh.rotation = total_rotation;
        }

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –¢–†–ê–ù–°–§–û–†–ú–ê–¶–ò–ò –û–ë–™–ï–ö–¢–ê –°–í–ï–¢–ê 
        if (!lightBulbModel.meshes.empty()) {
            lightBulbModel.meshes[0].position = state.mainLight.position;
        }

        // -------------------------------------------------------------------
        // --- 8. –û–¢–†–ï–ù–î–ï–†–ò–¢–¨ –ú–û–î–ï–õ–¨ (3D) –° –û–°–í–ï–©–ï–ù–ò–ï–ú ---
        // -------------------------------------------------------------------
        glEnable(GL_DEPTH_TEST);
        glEnable(GL_CULL_FACE);

        glUseProgram(modelShader.programID);

        // –û–¢–ü–†–ê–í–ö–ê UNIFORM-–ü–ï–†–ï–ú–ï–ù–ù–´–• –î–õ–Ø –û–°–í–ï–©–ï–ù–ò–Ø
        if (lightPosLoc != -1) glUniform3f(lightPosLoc, state.mainLight.position.x, state.mainLight.position.y, state.mainLight.position.z);
        if (lightColorLoc != -1) glUniform3f(lightColorLoc, state.mainLight.color.x * state.mainLight.intensity, state.mainLight.color.y * state.mainLight.intensity, state.mainLight.color.z * state.mainLight.intensity);
        // –û–¢–ü–†–ê–í–ö–ê –ù–û–í–û–ô –ü–û–ó–ò–¶–ò–ò –ö–ê–ú–ï–†–´ –í –®–ï–ô–î–ï–† 
        if (viewPosLoc != -1) glUniform3f(viewPosLoc, state.cameraPos.x, state.cameraPos.y, state.cameraPos.z);

        Draw_Model(state.vikingModel, modelShader, viewProjection);
        if (state.isParrotVisible) {
            Draw_Model(state.parrotModel, modelShader, viewProjection);
        }

        // –û–¢–†–ï–ù–î–ï–†–ò–¢–¨ –õ–ê–ú–ü–û–ß–ö–£
        if (!lightBulbModel.meshes.empty()) {
            Draw_Mesh(lightBulbModel.meshes[0], modelShader, viewProjection);
        }

        glUseProgram(0);


        // -------------------------------------------------------------------
        // --- 9. –û–¢–†–ï–ù–î–ï–†–ò–¢–¨ UI –≠–õ–ï–ú–ï–ù–¢–´ –ò –¢–ï–ö–°–¢ (2D) ---
        // -------------------------------------------------------------------
        glDisable(GL_DEPTH_TEST);
        glDisable(GL_CULL_FACE);
        glEnable(GL_BLEND);
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

        if (uiShader.programID != 0 && textShader.programID != 0)
        {
            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∑–∞–¥–Ω–µ–≥–æ —Ñ–æ–Ω–∞ –º–µ–Ω—é (Panel)
            UI::Draw_Panel(uiBackground, uiShader, orthoMatrix);

            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å–Ω–∏–∑—É
            UI::Draw_Image(uiSmallImage, uiShader, orthoMatrix);
            UI::Draw_Image(uiBottomImage, uiShader, orthoMatrix);

            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (—Å–≤–µ—Ä—Ö—É —Ñ–æ–Ω–∞)
            UI::Draw_Button(state.parrotButton, uiShader, textShader, orthoMatrix);
            UI::Draw_Button(state.oqut, uiShader, textShader, orthoMatrix);
            UI::Draw_Checkbox(state.fpsCheckbox, uiShader, textShader, orthoMatrix);
            UI::Draw_InputField(state.inputField, uiShader, textShader, orthoMatrix);


            glUseProgram(textShader.programID);
            if (orthoLoc != -1) glUniformMatrix4fv(orthoLoc, 1, GL_FALSE, &orthoMatrix[0][0]);

            // –í—ã–≤–æ–¥ FPS
            if (state.showFPS) {
                float r = 1.0f, g = 1.0f, b = 0.0f;
                if (colorLoc != -1) glUniform3f(colorLoc, r, g, b);
                gnu::UI::print_string(10, 10, fpsBuffer, r, g, b, 1.5f, false);
            }

            // –í—ã–≤–æ–¥ –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (–î–ª—è –æ—Ç–ª–∞–¥–∫–∏)
            std::snprintf(inputBuffer, sizeof(inputBuffer), "Input: %s", state.inputField.currentText.c_str());
            glm::vec3 debug_text_color = glm::vec3(1.0f, 1.0f, 1.0f);
            if (colorLoc != -1) glUniform3f(colorLoc, debug_text_color.x, debug_text_color.y, debug_text_color.z);
            gnu::UI::print_string(10, 40, inputBuffer, debug_text_color.x, debug_text_color.y, debug_text_color.z, 1.0f, false);

            glUseProgram(0);
        }


        glDisable(GL_BLEND);
        glEnable(GL_DEPTH_TEST);
        glEnable(GL_CULL_FACE);
        // -------------------------------------------------------------------

        glfwSwapBuffers(window);
    }

    // --- 9. –û–ß–ò–°–¢–ö–ê –†–ï–°–£–†–°–û–í ---
    if (customTextureID != 0) glDeleteTextures(1, &customTextureID);
    for (auto& mesh : state.vikingModel.meshes) mesh.delete_gpu_resources();
    for (auto& mesh : state.parrotModel.meshes) mesh.delete_gpu_resources();
    for (auto& mesh : lightBulbModel.meshes) mesh.delete_gpu_resources();

    // –û—á–∏—Å—Ç–∫–∞ –æ–±—â–µ–π –≥–µ–æ–º–µ—Ç—Ä–∏–∏ UI
    quadMesh.delete_gpu_resources();

    glDeleteProgram(modelShader.programID);
    glDeleteProgram(uiShader.programID);
    glDeleteProgram(textShader.programID);
    glfwDestroyWindow(window);
    glfwTerminate();

    return 0;
}
  ```
